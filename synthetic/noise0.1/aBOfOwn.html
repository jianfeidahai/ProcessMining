<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>

    let trace=['ACCBDEGIHIJKM','ACBDDEGIJKM','ACBDFGIJKMM','ABCDFGIHIJJKM','ACBDDEGIHIJKM','ACBDEGIIJKM','ABDFGIHIJKM','ABCCDEGIJKM','ABCFGIJKM','ABCDFGIHIJKM','ACBDEGIHIJKM','ACBDFGIJKM','ABCDEGIJKM','ABCDFGIJKM','ACBDEGIJKM','ACBDFGIHIJKM','ABCDEGIHIJKM'];
    let numOfTrace=[1,1,1,1,1,1,1,1,1,15,8,17,10,13,12,8,8];
    let arr=[];
    for(let i=0;i<trace.length;i++){
        arr.push(trace[i].split(''));
    }

    let zimu=['A','B','C','D','E','F','G','H','I','J','K','M'];
    let SFM=[];
    let SPM=[];

    for (let i=0;i<zimu.length;i++){
        if (zimu[i]!=='A'&&zimu[i]!=='C'&&zimu[i]!=='E'){
            SFM.push(`${zimu[i]} and C`);
            SFM.push(`C and ${zimu[i]}`);
            SPM.push(`${zimu[i]} and C`);
            SPM.push(`C and ${zimu[i]}`);
        }
        if (zimu[i]==='A'||zimu[i]==='B'||zimu[i]==='D'||zimu[i]==='C'||zimu[i]==='G'||zimu[i]==='F'){
            SFM.push(`${zimu[i]} and H`);
        }
        if (zimu[i]==='I'||zimu[i]==='H'||zimu[i]==='J'||zimu[i]==='K'||zimu[i]==='M'){
            SPM.push(`H and ${zimu[i]}`);
        }

    }

    let SFL=[];
    let SPL=[];

    for (let i=0;i<zimu.length;i++){
        for (let j=0;j<zimu.length;j++){
            let sum=0;
            arr.forEach(item=>{
                if(item.indexOf(zimu[i])<item.indexOf(zimu[j])){
                    sum++;
                }
            });
            if (sum>0&&sum<trace.length){
                SFL.push(`${zimu[i]} and ${zimu[j]}`);
            }
        }
    }
//console.log(SFL);

    for (let i=0;i<zimu.length;i++){
        for (let j=0;j<zimu.length;j++){
            let sum=0;
            arr.forEach(item=>{
                if(item.indexOf(zimu[i])<item.indexOf(zimu[j])&&item.indexOf(zimu[i])!==-1){
                    sum++;
                }
            });
            if (sum>0&&sum<trace.length){
                SPL.push(`${zimu[i]} and ${zimu[j]}`);
            }
        }
    }
//    console.log(SPL);

    function jiaoJi(arr1,arr2) {
        let result=[];
        arr1.forEach(item=>{
            if (arr2.indexOf(item)!==-1){
                result.push(item);
            }
        });
        return result;
    }

    console.log('aB:',0.5*jiaoJi(SFM,SFL).length/SFM.length+0.5*jiaoJi(SPM,SPL).length/SPM.length);
</script>
</body>
</html>