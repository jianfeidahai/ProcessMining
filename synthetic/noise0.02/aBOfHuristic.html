<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>

    let trace=['ABDCEGIJKM','ABCDEGMJKI','ACBDFGIHIJKM','ABCDEGIJKM','ACBDEGIHIJKM','ABCDEGIHIJKM','ACBDFGIJKM','ABCDFGIJKM','ABCDFGIHIJKM','ACBDEGIJKM'];
    let numOfTrace=[1,1,15,13,16,13,13,10,10,8];
    let arr=[];
    for(let i=0;i<trace.length;i++){
        arr.push(trace[i].split(''));
    }

    let zimu=['A','B','C','D','E','F','G','H','I','J','K','M'];
    let SFM=['B and C','C and B'];
    let SPM=['B and C','C and B'];

    for (let i=0;i<zimu.length;i++){
        if (zimu[i]==='A'||zimu[i]==='B'||zimu[i]==='D'||zimu[i]==='C'){
            SFM.push(`${zimu[i]} and E`);
            SFM.push(`${zimu[i]} and F`);
            SFM.push(`${zimu[i]} and H`);
        }
        if (zimu[i]==='E'||zimu[i]==='F'||zimu[i]==='G'||zimu[i]==='I'||zimu[i]==='H'){
            SFM.push(`${zimu[i]} and H`);
        }
        if (zimu[i]==='G'||zimu[i]==='H'||zimu[i]==='I'||zimu[i]==='J'||zimu[i]==='K'||zimu[i]==='M'){
            SPM.push(`E and ${zimu[i]}`);
            SPM.push(`F and ${zimu[i]}`);
        }
        if (zimu[i]==='H'||zimu[i]==='I'||zimu[i]==='J'||zimu[i]==='K'||zimu[i]==='M'){
            SPM.push(`H and ${zimu[i]}`);
        }
    }

    let SFL=[];
    let SPL=[];

    for (let i=0;i<zimu.length;i++){
        for (let j=0;j<zimu.length;j++){
            let sum=0;
            arr.forEach(item=>{
                if(item.indexOf(zimu[i])<item.indexOf(zimu[j])){
                    sum++;
                }
            });
            if (sum>0&&sum<trace.length){
                SFL.push(`${zimu[i]} and ${zimu[j]}`);
            }
        }
    }
//console.log(SFL);

    for (let i=0;i<zimu.length;i++){
        for (let j=0;j<zimu.length;j++){
            let sum=0;
            arr.forEach(item=>{
                if(item.indexOf(zimu[i])<item.indexOf(zimu[j])&&item.indexOf(zimu[i])!==-1){
                    sum++;
                }
            });
            if (sum>0&&sum<trace.length){
                SPL.push(`${zimu[i]} and ${zimu[j]}`);
            }
        }
    }
//    console.log(SPL);

    function jiaoJi(arr1,arr2) {
        let result=[];
        arr1.forEach(item=>{
            if (arr2.indexOf(item)!==-1){
                result.push(item);
            }
        });
        return result;
    }

    console.log('aB:',0.5*jiaoJi(SFM,SFL).length/SFM.length+0.5*jiaoJi(SPM,SPL).length/SPM.length);
</script>
</body>
</html>